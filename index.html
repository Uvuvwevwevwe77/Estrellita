<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Estrellita</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Tangerine:wght@400;700&display=swap" rel="stylesheet">

  <style>
    .tangerine-regular { font-family: 'Tangerine', cursive; font-weight: 400; }
    .tangerine-bold { font-family: 'Tangerine', cursive; font-weight: 700; }

    html, body {
      margin: 0; padding: 0; height: 100%;
      font-family: 'Tangerine', cursive;
      overflow: hidden;
    }

    body {
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      position: relative;
    }

    body::before {
      content: "";
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background: url('https://offloadmedia.feverup.com/secretbirmingham.com/wp-content/uploads/2021/05/28063415/Candlelight-Ballet-Solo-1024x683.jpg') center/cover no-repeat fixed;
      filter: blur(5px) brightness(0.95);
      z-index: -2;
      transition: filter 0.6s ease;
    }

    body.elegido::before { filter: brightness(0.3) blur(5px); }

    #contador {
      font-size: clamp(3rem, 10vw, 8rem);
      color: red;
      text-shadow: 2px 2px 4px black;
      font-weight: 700;
      transition: opacity 0.5s ease;
      position: fixed; top: 2vh; left: 50%; transform: translateX(-50%);
      z-index: 5;
    }

    .boton-container {
      display: flex; flex-direction: column; gap: 2vh;
      width: 88%; max-width: 640px; z-index: 1;
      align-items: center;
    }

    button {
      padding: 2rem 1rem; width: 92%;
      font-size: clamp(2rem, 7vw, 4rem);
      border: none; border-radius: 18px; cursor: pointer;
      background-size: cover; background-position: center;
      color: white; font-weight: 700;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
      display: flex; justify-content: center; align-items: center;
      transition: transform 0.3s ease, filter 0.3s ease;
      z-index: 2;
    }

    button:hover:not(:disabled) {
      filter: brightness(2.5);
      transform: scale(1.12);
    }

    button:disabled { opacity: 0.6; cursor: not-allowed; }

    .fondo-negro {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: black; opacity: 0; z-index: -1;
      transition: opacity 3s ease;
    }

    .imagen-seleccionada {
      position: fixed; top: 50%; left: 50%;
      width: 100%; height: 100%;
      background-size: cover; background-position: center;
      transform: translate(-50%, -50%);
      opacity: 0; z-index: -1;
      transition: opacity 3s ease;
    }

    .texto-aparece {
      font-size: clamp(3rem, 10vw, 6rem);
      transition: font-size 1.5s ease;
    }

    .oculto { opacity: 0; transition: opacity 0.6s ease; }
    .botones-ocultos { display: none !important; }
  </style>
</head>
<body>

  <div id="contador" class="tangerine-bold">60</div>

  <div class="boton-container" id="botonContainer">
    <button id="botonA" class="tangerine-regular" onclick="elegir('A')"
      style="background-image:url('https://images.unsplash.com/photo-1477132394330-d2376dc4c091?w=900'); background-position: center 50%">
      <span>El Lago de los Cisnes</span>
    </button>

    <button id="botonB" class="tangerine-regular" onclick="elegir('B')"
      style="background-image:url('https://www.baltana.com/files/wallpapers-18/Single-Candle-Best-Wallpaper-46910.jpg'); background-position: center 80%;">
      <span>Candlelight</span>
    </button>
  </div>

  <div id="fondoNegro" class="fondo-negro"></div>
  <div id="imagenSeleccionada" class="imagen-seleccionada"></div>

  <script>
    const botonA = document.getElementById("botonA");
    const botonB = document.getElementById("botonB");
    const contadorDiv = document.getElementById("contador");
    const fondoNegro = document.getElementById("fondoNegro");
    const imagenSeleccionada = document.getElementById("imagenSeleccionada");

    const modoEdicion = false; 

    let tiempo = 60;
    let cuentaAtras;

    function iniciarCuentaAtras() {
      cuentaAtras = setInterval(() => {
        if (tiempo > 0) {
          tiempo--;
          contadorDiv.textContent = tiempo;
        } else {
          clearInterval(cuentaAtras);
          contadorDiv.textContent = "Tiempo agotado";

          if (!modoEdicion) {
            elegir(Math.random() < 0.5 ? "A" : "B");
          }
        }
      }, 1000);
    }

    iniciarCuentaAtras();


    function elegir(opcion) {
      clearInterval(cuentaAtras);

      localStorage.setItem("seleccion", opcion);

      document.body.classList.add("elegido");
      contadorDiv.classList.add("oculto");

      fondoNegro.style.opacity = 1;

      if (opcion === "A") {
        imagenSeleccionada.style.backgroundImage =
          "url('https://images.unsplash.com/photo-1477132394330-d2376dc4c091?w=900')";
        botonA.querySelector("span").classList.add("texto-aparece");
      } else {
        imagenSeleccionada.style.backgroundImage =
          "url('https://www.baltana.com/files/wallpapers-18/Single-Candle-Best-Wallpaper-46910.jpg')";
        botonB.querySelector("span").classList.add("texto-aparece");
      }

      imagenSeleccionada.style.opacity = 1;

      // los botones desaparecen totalmente
      botonA.classList.add("oculto", "botones-ocultos");
      botonB.classList.add("oculto", "botones-ocultos");

      if (!modoEdicion) {
        botonA.disabled = true;
        botonB.disabled = true;
      }
    }


    // Al cargar la página: mantener selección si ya existía
    const seleccionGuardada = localStorage.getItem("seleccion");
    if (seleccionGuardada && !modoEdicion) {
      document.body.classList.add("elegido");
      contadorDiv.classList.add("oculto");

      fondoNegro.style.opacity = 1;
      imagenSeleccionada.style.opacity = 1;

      if (seleccionGuardada === "A") {
        imagenSeleccionada.style.backgroundImage =
          "url('https://images.unsplash.com/photo-1477132394330-d2376dc4c091?w=900')";
      } else {
        imagenSeleccionada.style.backgroundImage =
          "url('https://www.baltana.com/files/wallpapers-18/Single-Candle-Best-Wallpaper-46910.jpg')";
      }

      // Ocultar botones al cargar
      botonA.classList.add("botones-ocultos");
      botonB.classList.add("botones-ocultos");
    }
  </script>

  <audio id="musica" autoplay loop>
    <source src="" type="audio/mp3">
  </audio>
</body>
</html>

